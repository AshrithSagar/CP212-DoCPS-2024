\section*{Question 3: \small{C programming and compilation process}}

\lstinputlisting[language={}, frame=single, caption={Incorrect code}, linewidth=\linewidth]{../Codes/q3.c}

\begin{enumerate}

      \item Opening docstring comment has no corresponding closing tag

            \textbf{Stage at which they show up:}
            Not shown

            \textbf{Fix:}
            Add \texttt{*/} at the end of the comment.
            Multi-line comments should be enclosed within \texttt{/* */}.
            This is a semantic error and will not show up during compilation.

      \item Undefined type of array \texttt{c}

            \textbf{Stage at which they show up:}
            Compilation

            \textbf{Fix:}
            Add \texttt{int} before the array \texttt{c}

      \item Invalid values in array \texttt{c}

            \textbf{Stage at which they show up:}
            Compilation

            \textbf{Fix:}
            9ABC, DEF0 are not valid hexadecimal numbers and should be prefixed with \texttt{0x}.

            Suggested fix:
            \begin{lstlisting}[language=C, frame=single]
const int c[4] = {1234, 5678, 0x9ABC, 0xDEF0};
            \end{lstlisting}

      \item Undefined loop variable \texttt{i}

            \textbf{Stage at which they show up:}
            Compilation

            \textbf{Fix:}
            Add \texttt{int} before the loop variable \texttt{i}

      \item Incorrect loop bounds

            \textbf{Stage at which they show up:}
            Compilation

            \textbf{Fix:}
            The array \texttt{c} has only 4 elements, indexed from 0 to 3.
            The loop should run from 0 to 3, and not 0 to 4, as the latter will cause an out-of-bounds error.

            Suggested fix:
            \begin{lstlisting}[language=C, frame=single]
for (int i = 0; i < N; i++)
            \end{lstlisting}

      \item Unitialised variable \texttt{y}

            \textbf{Stage at which they show up:}
            Run-time

            \textbf{Fix:}
            Initialise \texttt{y} to zero.

      \item Undefined function \texttt{pow}

            \textbf{Stage at which they show up:}
            Pre-processing

            \textbf{Fix:}
            Include the header file \texttt{math.h} at the beginning of the program.

      \item Undefined \texttt{printff}

            \textbf{Stage at which they show up:}
            Compilation, if \texttt{TEST} was defined previously, else will not show up.
            Additionally, Pre-processing, since header file \texttt{stdio.h} is included.

            \textbf{Fix:}
            Replace \texttt{printff} with \texttt{printf} and include \texttt{stdio.h} at the beginning of the program.

      \item Incorrect ordering in \texttt{printf} format string

            \textbf{Stage at which they show up:}
            Not shown up

            \textbf{Fix:}
            Should interchange the order of \texttt{x} and \texttt{y} in the format string.
            This is a logical error and will not throw an error during compilation.

      \item Return type mismatch

            \textbf{Stage at which they show up:}
            Compilation

            \textbf{Fix:}
            The function \texttt{poly} is defined to return a \texttt{double}.
            Changing type of \texttt{y}  to \texttt{double} is better.

      \item Better practice: Define size of array \texttt{c} using the above defined \texttt{N}

\end{enumerate}

\clearpage
\subsection*{Suggested fixes}

\lstinputlisting[language={C}, frame=single, caption={Code with suggestions incorporated}, linewidth=\linewidth]{../Codes/q3-fix.c}
